diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/bitwuzla_wrap.cpp lib/native/source/libbitwuzla.patched/bitwuzla_wrap.cpp
--- lib/native/source/libbitwuzla/bitwuzla_wrap.cpp	2026-01-17 17:02:55.537232595 +0100
+++ lib/native/source/libbitwuzla/bitwuzla_wrap.cpp	2026-01-17 16:38:05.284027315 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/bitwuzla_wrap.h lib/native/source/libbitwuzla.patched/bitwuzla_wrap.h
--- lib/native/source/libbitwuzla/bitwuzla_wrap.h	2026-01-17 17:02:55.536904584 +0100
+++ lib/native/source/libbitwuzla/bitwuzla_wrap.h	2026-01-17 16:38:05.283962767 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java	2026-01-17 17:02:55.526232716 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java	2026-01-17 16:38:05.318699522 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,36 +16,19 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Bitwuzla {
-  private transient long swigCPtr;
-  private transient boolean swigCMemOwn;
+public class Bitwuzla extends Reference {
 
   protected Bitwuzla(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Bitwuzla obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected void swigSetCMemOwn(boolean own) {
-    swigCMemOwn = own;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
-
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Bitwuzla(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Bitwuzla(swigCPtr);
   }
 
   public Bitwuzla(TermManager tm, Options options) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java	2026-01-17 17:02:55.536904584 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java	2026-01-17 16:38:05.320476314 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java	2026-01-17 17:02:55.536842549 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java	2026-01-17 16:38:05.320925046 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java	2026-01-17 17:02:55.432504669 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java	2026-01-17 16:38:05.320751127 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java	2026-01-17 17:02:55.425233827 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java	2026-01-17 16:38:05.318798543 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -42,7 +50,8 @@
     if (swigCPtr != 0) {
       if (swigCMemOwn) {
         swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Map_TermTerm(swigCPtr);
+        // Disabled to fix memory management issues
+        // BitwuzlaNativeJNI.delete_Map_TermTerm(swigCPtr);
       }
       swigCPtr = 0;
     }
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java	2026-01-17 17:02:55.434083212 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java	2026-01-17 16:38:05.319650873 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java	2026-01-17 17:02:55.448233575 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java	2026-01-17 16:38:05.320042340 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java	2026-01-17 17:02:55.536232606 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java	2026-01-17 16:38:05.318877408 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,44 +16,20 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Parser {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+public class Parser extends Reference{
 
   protected Parser(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Parser obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Parser obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
 
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Parser(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Parser(swigCPtr);
   }
 
   public Parser(TermManager tm, Options options, String language) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java	1970-01-01 01:00:00.000000000 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java	2026-01-17 16:38:05.319240733 +0100
@@ -0,0 +1,38 @@
+/*
+ * This file is part of JavaSMT,
+ * an API wrapper for a collection of SMT solvers:
+ * https://github.com/sosy-lab/java-smt
+ *
+ * SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+ *
+ * SPDX-License-Identifier: Apache-2.0
+ */
+
+package org.sosy_lab.java_smt.solvers.bitwuzla.api;
+
+public abstract class Reference {
+  protected transient long swigCPtr;
+  protected transient boolean swigCMemOwn;
+
+  Reference(long cPtr, boolean cMemoryOwn) {
+    swigCMemOwn = cMemoryOwn;
+    swigCPtr = cPtr;
+    TermManager.addReference(this);
+  }
+
+  abstract void delete();
+
+  long getSwigCPtr() {
+    return swigCPtr;
+  }
+
+  void close() {
+    if (swigCPtr != 0) {
+      if (swigCMemOwn) {
+        delete();
+        swigCMemOwn = false;
+      }
+      swigCPtr = 0;
+    }
+  }
+}
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java	2026-01-17 17:02:55.428584119 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java	2026-01-17 16:38:05.320640295 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java	2026-01-17 17:02:55.429543598 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java	2026-01-17 16:38:05.319951233 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java	2026-01-17 17:02:55.472233310 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java	2026-01-17 16:38:05.318931046 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,44 +16,19 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Sort {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+public class Sort extends Reference {
 
   protected Sort(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Sort obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Sort obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
-
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Sort(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Sort(swigCPtr);
   }
 
   public boolean equals(Object object) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java	2026-01-17 17:02:55.474233288 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java	2026-01-17 16:38:05.320105526 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java	2026-01-17 17:02:55.464233398 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java	2026-01-17 16:38:05.318986297 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,44 +16,19 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Term {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+public class Term extends Reference {
 
   protected Term(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Term obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Term obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
-
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Term(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Term(swigCPtr);
   }
 
   public boolean equals(Object object) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java	2026-01-17 17:02:55.516232826 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java	2026-01-17 17:01:52.871929804 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,43 +16,42 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class TermManager {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.Map;
+import java.util.LinkedHashMap;
+
+public class TermManager extends Reference {
+
+  private static final Map<Long, Reference> references = new LinkedHashMap<>();
 
   protected TermManager(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(TermManager obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(TermManager obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_TermManager(swigCPtr);
   }
 
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
+  static void addReference(Reference pointer) {
+    synchronized (TermManager.class) {
+      references.put(pointer.swigCPtr, pointer);
+    }
   }
 
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_TermManager(swigCPtr);
+  public static void deleteReferences() {
+    synchronized (TermManager.class) {
+      LinkedList<Reference> values = new LinkedList<Reference>(references.values());
+      Iterator<Reference> i = values.descendingIterator();
+      while (i.hasNext()) {
+        i.next().close();
       }
-      swigCPtr = 0;
+      references.clear();
     }
   }
 
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java	2026-01-17 17:02:55.362234520 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java	2026-01-17 16:38:05.320163993 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java	2026-01-17 17:02:55.404234058 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java	2026-01-17 16:38:05.319116115 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -42,7 +50,8 @@
     if (swigCPtr != 0) {
       if (swigCMemOwn) {
         swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Vector_Sort(swigCPtr);
+        // Disabled to fix memory management issues
+        // BitwuzlaNativeJNI.delete_Vector_Sort(swigCPtr);
       }
       swigCPtr = 0;
     }
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java	2026-01-17 17:02:55.376234367 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java	2026-01-17 16:38:05.319297617 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java	2026-01-17 17:02:55.390234212 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java	2026-01-17 16:38:05.319178669 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -42,7 +50,8 @@
     if (swigCPtr != 0) {
       if (swigCMemOwn) {
         swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Vector_Term(swigCPtr);
+        // Disabled to fix memory management issues
+        // BitwuzlaNativeJNI.delete_Vector_Term(swigCPtr);
       }
       swigCPtr = 0;
     }
