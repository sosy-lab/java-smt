diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/bitwuzla_wrap.cpp lib/native/source/libbitwuzla.patched/bitwuzla_wrap.cpp
--- lib/native/source/libbitwuzla/bitwuzla_wrap.cpp	2026-01-18 00:39:56.278597334 +0100
+++ lib/native/source/libbitwuzla/bitwuzla_wrap.cpp	2026-01-18 00:35:20.096001555 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/bitwuzla_wrap.h lib/native/source/libbitwuzla.patched/bitwuzla_wrap.h
--- lib/native/source/libbitwuzla/bitwuzla_wrap.h	2026-01-18 00:39:56.278597334 +0100
+++ lib/native/source/libbitwuzla/bitwuzla_wrap.h	2026-01-18 00:35:20.095955330 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
Only in lib/native/source/libbitwuzla: install-linux-x64
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/AbstractReference.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/AbstractReference.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/AbstractReference.java	1970-01-01 01:00:00.000000000 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/AbstractReference.java	2026-01-18 00:35:20.096602498 +0100
@@ -0,0 +1,38 @@
+/*
+ * This file is part of JavaSMT,
+ * an API wrapper for a collection of SMT solvers:
+ * https://github.com/sosy-lab/java-smt
+ *
+ * SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+ *
+ * SPDX-License-Identifier: Apache-2.0
+ */
+
+package org.sosy_lab.java_smt.solvers.bitwuzla.api;
+
+public abstract class AbstractReference implements Reference {
+  protected transient long swigCPtr;
+  protected transient boolean swigCMemOwn;
+
+  AbstractReference(long cPtr, boolean cMemoryOwn) {
+    swigCMemOwn = cMemoryOwn;
+    swigCPtr = cPtr;
+    TermManager.addReference(this);
+  }
+
+  abstract void delete();
+
+  public long getSwigCPtr() {
+    return swigCPtr;
+  }
+
+  public void close() {
+    if (swigCPtr != 0) {
+      if (swigCMemOwn) {
+        delete();
+        swigCMemOwn = false;
+      }
+      swigCPtr = 0;
+    }
+  }
+}
\ No newline at end of file
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java	2026-01-18 00:39:56.267286380 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Bitwuzla.java	2026-01-18 00:35:20.096656646 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,36 +16,19 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Bitwuzla {
-  private transient long swigCPtr;
-  private transient boolean swigCMemOwn;
+public class Bitwuzla extends AbstractReference {
 
   protected Bitwuzla(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Bitwuzla obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected void swigSetCMemOwn(boolean own) {
-    swigCMemOwn = own;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
-
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Bitwuzla(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Bitwuzla(swigCPtr);
   }
 
   public Bitwuzla(TermManager tm, Options options) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java	2026-01-18 00:39:56.278597334 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNative.java	2026-01-18 00:35:20.097303343 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java	2026-01-18 00:39:56.278552407 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/BitwuzlaNativeJNI.java	2026-01-18 00:35:20.097392729 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java	2026-01-18 00:39:56.173510151 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Kind.java	2026-01-18 00:35:20.097344190 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java	2026-01-18 00:39:56.166325505 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Map_TermTerm.java	2026-01-18 00:43:08.338052542 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,37 +16,27 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Map_TermTerm extends java.util.AbstractMap<Term, Term> {
+public class Map_TermTerm extends java.util.AbstractMap<Term, Term> implements Reference {
   private transient long swigCPtr;
   protected transient boolean swigCMemOwn;
 
   protected Map_TermTerm(long cPtr, boolean cMemoryOwn) {
     swigCMemOwn = cMemoryOwn;
     swigCPtr = cPtr;
+    TermManager.addReference(this);
   }
 
   protected static long getCPtr(Map_TermTerm obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Map_TermTerm obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
+  @Override
+  public long getSwigCPtr() {
+    return swigCPtr;
   }
 
-  public synchronized void delete() {
+  @Override
+  public void close() {
     if (swigCPtr != 0) {
       if (swigCMemOwn) {
         swigCMemOwn = false;
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java	2026-01-18 00:39:56.174985166 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Option.java	2026-01-18 00:35:20.096916961 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java	2026-01-18 00:39:56.189316596 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Options.java	2026-01-18 00:35:20.097083764 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java	2026-01-18 00:39:56.277282507 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Parser.java	2026-01-18 00:35:20.096740944 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,44 +16,20 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Parser {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+public class Parser extends AbstractReference{
 
   protected Parser(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Parser obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Parser obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
 
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Parser(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Parser(swigCPtr);
   }
 
   public Parser(TermManager tm, Options options, String language) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java	1970-01-01 01:00:00.000000000 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Reference.java	2026-01-18 00:35:20.097043478 +0100
@@ -0,0 +1,16 @@
+/*
+ * This file is part of JavaSMT,
+ * an API wrapper for a collection of SMT solvers:
+ * https://github.com/sosy-lab/java-smt
+ *
+ * SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+ *
+ * SPDX-License-Identifier: Apache-2.0
+ */
+
+package org.sosy_lab.java_smt.solvers.bitwuzla.api;
+
+public interface Reference {
+  long getSwigCPtr();
+  void close();
+}
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java	2026-01-18 00:39:56.169882460 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Result.java	2026-01-18 00:35:20.097446757 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java	2026-01-18 00:39:56.170834868 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/RoundingMode.java	2026-01-18 00:35:20.096961194 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java	2026-01-18 00:39:56.213307299 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Sort.java	2026-01-18 00:35:20.097002802 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,44 +16,19 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Sort {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+public class Sort extends AbstractReference {
 
   protected Sort(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Sort obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Sort obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
-
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Sort(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Sort(swigCPtr);
   }
 
   public boolean equals(Object object) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java	2026-01-18 00:39:56.214306911 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Terminator.java	2026-01-18 00:35:20.097216311 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java	2026-01-18 00:39:56.204310785 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Term.java	2026-01-18 00:35:20.097123199 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,44 +16,19 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Term {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+public class Term extends AbstractReference {
 
   protected Term(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(Term obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Term obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
-  }
-
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_Term(swigCPtr);
-      }
-      swigCPtr = 0;
-    }
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_Term(swigCPtr);
   }
 
   public boolean equals(Object object) {
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java	2026-01-18 00:39:56.257290254 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/TermManager.java	2026-01-18 00:35:20.097168833 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,43 +16,42 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class TermManager {
-  private transient long swigCPtr;
-  protected transient boolean swigCMemOwn;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.Map;
+import java.util.LinkedHashMap;
+
+public class TermManager extends AbstractReference {
+
+  private static final Map<Long, Reference> references = new LinkedHashMap<>();
 
   protected TermManager(long cPtr, boolean cMemoryOwn) {
-    swigCMemOwn = cMemoryOwn;
-    swigCPtr = cPtr;
+    super(cPtr, cMemoryOwn);
   }
 
   protected static long getCPtr(TermManager obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(TermManager obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
+  @Override
+  public void delete() {
+    BitwuzlaNativeJNI.delete_TermManager(swigCPtr);
   }
 
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
+  static void addReference(Reference pointer) {
+    synchronized (TermManager.class) {
+      references.put(pointer.getSwigCPtr(), pointer);
+    }
   }
 
-  public synchronized void delete() {
-    if (swigCPtr != 0) {
-      if (swigCMemOwn) {
-        swigCMemOwn = false;
-        BitwuzlaNativeJNI.delete_TermManager(swigCPtr);
+  public static void deleteReferences() {
+    synchronized (TermManager.class) {
+      LinkedList<Reference> values = new LinkedList<Reference>(references.values());
+      Iterator<Reference> i = values.descendingIterator();
+      while (i.hasNext()) {
+        i.next().close();
       }
-      swigCPtr = 0;
+      references.clear();
     }
   }
 
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java	2026-01-18 00:39:56.102350297 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Int.java	2026-01-18 00:35:20.097257248 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java	2026-01-18 00:39:56.146333253 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Sort.java	2026-01-18 00:43:08.353047512 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,37 +16,27 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Vector_Sort extends java.util.AbstractList<Sort> implements java.util.RandomAccess {
+public class Vector_Sort extends java.util.AbstractList<Sort> implements java.util.RandomAccess, Reference {
   private transient long swigCPtr;
   protected transient boolean swigCMemOwn;
 
   protected Vector_Sort(long cPtr, boolean cMemoryOwn) {
     swigCMemOwn = cMemoryOwn;
     swigCPtr = cPtr;
+    TermManager.addReference(this);
   }
 
   protected static long getCPtr(Vector_Sort obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Vector_Sort obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
+  @Override
+  public long getSwigCPtr() {
+    return swigCPtr;
   }
 
-  public synchronized void delete() {
+  @Override
+  public void close() {
     if (swigCPtr != 0) {
       if (swigCMemOwn) {
         swigCMemOwn = false;
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java	2026-01-18 00:39:56.117344487 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_String.java	2026-01-18 00:35:20.096872068 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
diff -ur --unidirectional-new-file lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java lib/native/source/libbitwuzla.patched/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java
--- lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java	2026-01-18 00:39:56.131339063 +0100
+++ lib/native/source/libbitwuzla/src/org/sosy_lab/java_smt/solvers/bitwuzla/api/Vector_Term.java	2026-01-18 00:43:08.355046841 +0100
@@ -1,3 +1,11 @@
+// This file is part of JavaSMT,
+// an API wrapper for a collection of SMT solvers:
+// https://github.com/sosy-lab/java-smt
+//
+// SPDX-FileCopyrightText: 2024 Dirk Beyer <https://www.sosy-lab.org>
+//
+// SPDX-License-Identifier: Apache-2.0
+
 /* ----------------------------------------------------------------------------
  * This file was automatically generated by SWIG (https://www.swig.org).
  * Version 4.4.1
@@ -8,37 +16,27 @@
 
 package org.sosy_lab.java_smt.solvers.bitwuzla.api;
 
-public class Vector_Term extends java.util.AbstractList<Term> implements java.util.RandomAccess {
+public class Vector_Term extends java.util.AbstractList<Term> implements java.util.RandomAccess, Reference {
   private transient long swigCPtr;
   protected transient boolean swigCMemOwn;
 
   protected Vector_Term(long cPtr, boolean cMemoryOwn) {
     swigCMemOwn = cMemoryOwn;
     swigCPtr = cPtr;
+    TermManager.addReference(this);
   }
 
   protected static long getCPtr(Vector_Term obj) {
     return (obj == null) ? 0 : obj.swigCPtr;
   }
 
-  protected static long swigRelease(Vector_Term obj) {
-    long ptr = 0;
-    if (obj != null) {
-      if (!obj.swigCMemOwn)
-        throw new RuntimeException("Cannot release ownership as memory is not owned");
-      ptr = obj.swigCPtr;
-      obj.swigCMemOwn = false;
-      obj.delete();
-    }
-    return ptr;
-  }
-
-  @SuppressWarnings({"deprecation", "removal"})
-  protected void finalize() {
-    delete();
+  @Override
+  public long getSwigCPtr() {
+    return swigCPtr;
   }
 
-  public synchronized void delete() {
+  @Override
+  public void close() {
     if (swigCPtr != 0) {
       if (swigCMemOwn) {
         swigCMemOwn = false;
