The following steps compile Z3 as needed for JavaSMT.
The result is a library `libz3.so` and two bindings `libz3j.so` and `libz3java.so` that allow to use Z3 as SMT-solver from JavaSMT.

0) Basic requirements:
The following basic development tools have to be installed for compiling Z3.
  - we use a standard minimal installation of Ubuntu 14.04.3 LTS (GNU/Linux 3.19.0-25-generic x86_64)
  - make, gcc, git, ...
  - Java7 (for compatibility of the library we do not want to use Java8, as it is not available on some machines)

1) Checkout Z3 from our Z3-repository. 
We have applied several small fixes, of which some are needed to compile Z3 successfully for usage within JavaSMT.
JavaSMT uses IVY to resolve dependencies and thus has a special mechanism to load libraries.
The given checkout of Z3 allows to configure the loading mechanism.

  git clone https://github.com/kfriedberger/z3

2) Build Z3.
We configure Z3 with the following options:
  - `--java`: build the JNI-wrapper for Z3
  - `--javaExternalLibraryLoading`: use our own loading mechanism
  - `--noomp`: OpenMP is not available on some of our machines, you can ignore this flag, if not needed.
This step is already sufficient to use the option  `solver.solver=Z3JAVA`, as everything related to Z3 is compiled, including the JNI-wrapper and the JAR-file `com.microsoft.z3.jar`.

  cd z3
  ./configure --java --javaExternalLibraryLoading --noomp
  cd build
  make

3) Build our own JNI-wrapper.
This step is needed for direct usage of Z3 within JavaSMT with the option `solver.solver=Z3`.

  cd java-smt
  cd lib/native/source/libz3j/
  ./compile.sh PATH_TO_Z3_DIRECTORY

4) Produce and package all files for the IVY-repository.
This step will determine the version of Z3 (including GIT revision) and produce files for IVY. 
As last step you might wish to add and commit the produced files to the IVY-repository (SVN).
You can use the cmdline that is given as part of the ANT-output.
(You can also copy the files into your own repository and use the cmdline `ant -Divy.repo.url=IVY_REPOSITORY` to compile JavaSMT.)

  ant publish-z3 -Dz3.path=ABSOLUTE_PATH_TO_Z3_DIRECTORY
